const EU_COUNTRIES=["AL","AD","AM","AT","AZ","BY","BE","BA","BG","HR","CY","CZ","DK","EE","FI","FR","GE","DE","GR","HU","IS","IE","IT","KZ","XK","LV","LI","LT","LU","MT","MD","MC","ME","NL","MK","NO","PL","PT","RO","RU","SM","RS","SK","SI","ES","SE","CH","TR","UA","GB","VA"],config={allowedDomains:[],privacyPolicyUrl:"https://freegrapesociety.com/privacy-policy",uetConfig:{enabled:!1,defaultTagId:"137027166",autoDetectTagId:!0,defaultConsent:"denied",enforceInEEA:!0},behavior:{autoShow:!0,bannerDelay:0,rememberLanguage:!0,acceptOnScroll:!1,acceptOnContinue:!1,showFloatingButton:!0,showAdminButton:!1,floatingButtonPosition:"left",adminButtonPosition:"left",bannerPosition:"left",bannerAnimation:{duration:.4,easing:"cubic-bezier(0.25, 0.8, 0.25, 1)",enterEffect:"fadeInUp",exitEffect:"fadeOutDown"},modalAnimation:{duration:.3,easing:"ease-in-out",enterEffect:"fadeIn",exitEffect:"fadeOut"},dashboardAnimation:{duration:.3,easing:"ease-in-out",enterEffect:"fadeIn",exitEffect:"fadeOut"},bannerSchedule:{enabled:!1,startDate:"2023-01-01",endDate:"2023-12-31",startTime:"00:00",endTime:"23:59",daysOfWeek:[1,2,3,4,5],durationDays:365,durationMinutes:2}},languageConfig:{defaultLanguage:"en",availableLanguages:[],showLanguageSelector:!1,autoDetectLanguage:!0},geoConfig:{allowedCountries:[],allowedRegions:[],allowedCities:[],blockedCountries:[],blockedRegions:[],blockedCities:[],euOnly:!1,specificRegions:[]},analytics:{enabled:!0,storageDays:365,showDashboard:!0,passwordProtect:!0,dashboardPassword:"admin123",passwordCookieDuration:365,trackPageViews:!0,trackEvents:!0,trackConsentChanges:!0},uiTheme:"default",bannerStyle:{background:"#ffffff",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",width:"465px",padding:"24px",textColor:"#2c3e50",linkColor:"#3498db",linkHoverColor:"#1d6fa5",border:{enabled:!1,width:"1px",style:"solid",color:"#e0e0e0"},title:{fontSize:"18px",fontWeight:"600",color:"#2c3e50"},description:{fontSize:"14px",lineHeight:"1.5",color:"#7f8c8d"}},buttonStyle:{borderRadius:"8px",padding:"12px 20px",fontWeight:"600",fontSize:"14px",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",accept:{background:"#f4fe81 !important",color:"#000000 !important",border:"1px solid #10100f12 !important",hover:{background:"#f4fe81 !important",color:"#000000 !important",transform:"translateY(-1px) !important"}},reject:{background:"#ffffff",color:"#e74c3c",border:"1px solid #e74c3c",hover:{background:"#ffeeed",color:"#e74c3c",transform:"translateY(-1px)"}},adjust:{background:"#f8f9fa",color:"#333333",border:"1px solid #e0e0e0",hover:{background:"#f0f2f5",color:"#333333",transform:"translateY(-1px)"}},save:{background:"#3498db",color:"#ffffff",border:"1px solid #3498db",hover:{background:"#2980b9",color:"#ffffff",transform:"translateY(-1px)"}}},floatingButtonStyle:{size:"50px",background:"#f4fe81",iconColor:"#000000",border:"2px solid #ffffff",borderRadius:"50%",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",hover:{background:"#27ae60",transform:"translateY(-3px) scale(1.05)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.3)"}},adminButtonStyle:{size:"60px",background:"#2ecc71",iconColor:"#ffffff",border:"2px solid #ffffff",borderRadius:"50%",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",hover:{background:"#2980b9",transform:"translateY(-3px) scale(1.05)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.3)"}},modalStyle:{background:"#ffffff",borderRadius:"12px",width:"845px",maxHeight:"470px",header:{background:"#f8f9fa",textColor:"#2c3e50",fontSize:"1.5rem",fontWeight:"600"},body:{background:"#fefefe",textColor:"#2c3e50"},footer:{background:"#f8f9fa",borderTop:"1px solid #ecf0f1"},closeButton:{color:"#7f8c8d",hoverColor:"#e74c3c"}},toggleStyle:{activeColor:"#2ecc71",inactiveColor:"#bdc3c7",size:"50px",height:"26px",sliderSize:"20px"},categoryStyle:{background:"#f8f9fa",borderRadius:"8px",border:"1px solid #ecf0f1",title:{fontSize:"1.1rem",fontWeight:"600",color:"#2c3e50"},description:{fontSize:"14px",color:"#7f8c8d"}},dashboardStyle:{background:"#ffffff",borderRadius:"12px",width:"900px",maxHeight:"600px",header:{background:"#f8f9fa",textColor:"#2c3e50",fontSize:"1.5rem",fontWeight:"600"},body:{background:"#fefefe"},statCards:{background:"#f8f9fa",borderRadius:"8px",acceptedColor:"#2ecc71",rejectedColor:"#e74c3c",customColor:"#3498db",totalColor:"#9b59b6"},barChart:{height:"20px",borderRadius:"10px",background:"#ecf0f1",acceptedColor:"#2ecc71",rejectedColor:"#e74c3c",customColor:"#3498db"}}};function gtag(){dataLayer.push(arguments)}function gtag(){dataLayer.push(arguments)}function setDefaultUetConsent(){if(!config.uetConfig.enabled)return;void 0===window.uetq&&(window.uetq=[]);const e="granted"===config.uetConfig.defaultConsent?"granted":"denied";window.uetq.push("consent","default",{ad_storage:e}),window.dataLayer.push({event:"uet_consent_default",consent_mode:{ad_storage:e,analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"},gcs:"G100",timestamp:(new Date).toISOString()})}window.dataLayer=window.dataLayer||[],void 0===window.uetq&&(window.uetq=[]),window.uetq=window.uetq||[],window.dataLayer=window.dataLayer||[],gtag("consent","default",{ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",personalization_storage:"denied",functionality_storage:"denied",security_storage:"granted"}),window.dataLayer.push({event:"initial_consent_state",consent_mode:{ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",personalization_storage:"denied",functionality_storage:"denied",security_storage:"granted"},gcs:"G100",timestamp:(new Date).toISOString()});const cookieDatabase={_gcl:{category:"advertising",duration:"90 days",description:"Google Click Identifier - Tracks ad clicks and conversions"},_gcl_au:{category:"advertising",duration:"90 days",description:"Google Ads conversion tracking"},gclid:{category:"advertising",duration:"30 days",description:"Google Click ID - Tracks PPC ad clicks"},IDE:{category:"advertising",duration:"390 days",description:"Google DoubleClick - Used for retargeting"},NID:{category:"advertising",duration:"180 days",description:"Google Ads preferences"},_gat_gtag:{category:"advertising",duration:"1 minute",description:"Google Tag Manager throttle"},msclkid:{category:"advertising",duration:"30 days",description:"Microsoft Click ID - Tracks ad clicks"},_uetmsdns:{category:"advertising",duration:"Session",description:"Microsoft UET consent mode cookie"},MUID:{category:"advertising",duration:"390 days",description:"Microsoft Universal ID"},_uetsid:{category:"advertising",duration:"1 day",description:"Bing Ads session ID"},_uetvid:{category:"advertising",duration:"390 days",description:"Bing Ads visitor ID"},_fbp:{category:"advertising",duration:"90 days",description:"Facebook Pixel - Conversion tracking"},fr:{category:"advertising",duration:"90 days",description:"Facebook browser ID"},datr:{category:"advertising",duration:"730 days",description:"Facebook browser identification"},_ttp:{category:"advertising",duration:"390 days",description:"TikTok Pixel tracking"},ttclid:{category:"advertising",duration:"30 days",description:"TikTok Click ID"},tt_sessionid:{category:"advertising",duration:"1 day",description:"TikTok session"},lidc:{category:"advertising",duration:"1 day",description:"LinkedIn Ads routing"},bcookie:{category:"advertising",duration:"730 days",description:"LinkedIn Browser ID"},li_sugr:{category:"advertising",duration:"90 days",description:"LinkedIn user tracking"},_pinterest_ct_ua:{category:"advertising",duration:"365 days",description:"Pinterest Click Tracking"},_pinterest_sess:{category:"advertising",duration:"1 day",description:"Pinterest session"},cm_sub:{category:"advertising",duration:"365 days",description:"Pinterest conversion"},obuid:{category:"advertising",duration:"365 days",description:"Outbrain user ID"},obcl:{category:"advertising",duration:"30 days",description:"Outbrain click tracking"},personalization_id:{category:"advertising",duration:"730 days",description:"Twitter personalization"},guest_id:{category:"advertising",duration:"730 days",description:"Twitter guest tracking"},sc_at:{category:"advertising",duration:"365 days",description:"Snapchat Ads tracking"},_scid:{category:"advertising",duration:"365 days",description:"Snapchat user ID"},rdt_uuid:{category:"advertising",duration:"365 days",description:"Reddit unique user ID"},session_tracker:{category:"advertising",duration:"1 day",description:"Reddit session"},criteo:{category:"advertising",duration:"365 days",description:"Criteo retargeting"},uid:{category:"advertising",duration:"365 days",description:"Criteo user ID"},__adroll:{category:"advertising",duration:"365 days",description:"AdRoll tracking"},__ar_v4:{category:"advertising",duration:"365 days",description:"AdRoll segmentation"},"ad-id":{category:"advertising",duration:"270 days",description:"Amazon Ad System ID"},"ad-privacy":{category:"advertising",duration:"730 days",description:"Amazon Ad Preferences"},yandexuid:{category:"advertising",duration:"365 days",description:"Yandex Metrica user ID"},ymex:{category:"advertising",duration:"365 days",description:"Yandex Metrica visitor"},"m-b":{category:"advertising",duration:"365 days",description:"Quora browser ID"},"m-uid":{category:"advertising",duration:"365 days",description:"Quora user ID"},sadb:{category:"advertising",duration:"30 days",description:"StackAdapt bidding data"},sadr:{category:"advertising",duration:"30 days",description:"StackAdapt retargeting"},TDID:{category:"advertising",duration:"365 days",description:"The Trade Desk ID"},TDCPM:{category:"advertising",duration:"365 days",description:"The Trade Desk CPM data"},mmapi:{category:"advertising",duration:"30 days",description:"MediaMath API tracking"},mmdata:{category:"advertising",duration:"30 days",description:"MediaMath campaign data"},_ga:{category:"analytics",duration:"730 days",description:"Google Analytics"},_gid:{category:"analytics",duration:"1 day",description:"Google Analytics"},_gat:{category:"analytics",duration:"1 minute",description:"Google Analytics throttle"},PHPSESSID:{category:"functional",duration:"Session",description:"PHP session"},cookie_consent:{category:"functional",duration:"365 days",description:"Consent preferences"},lu:{category:"advertising",duration:"2 years",description:"Used to record whether the person chose to remain logged in (User ID and miscellaneous log in information)"},xs:{category:"advertising",duration:"90 days",description:"Used with c_user cookie to authenticate identity to Facebook (Session ID, creation time, authentication value)"},c_user:{category:"advertising",duration:"90 days",description:"Used with xs cookie to authenticate identity to Facebook (User ID)"},m_user:{category:"advertising",duration:"90 days",description:"Used to authenticate identity on Facebook mobile website (Email, User ID, authentication value)"},pl:{category:"advertising",duration:"90 days",description:"Records that a device or browser logged in via Facebook platform"},dbln:{category:"advertising",duration:"2 years",description:"Used to enable device-based logins (Login authentication values)"},aks:{category:"advertising",duration:"30 days",description:"Determines login state of a person visiting accountkit.com (Account kit access token)"},aksb:{category:"advertising",duration:"30 minutes",description:"Authenticates logins using Account Kit (Request time value)"},sfau:{category:"advertising",duration:"1 day",description:"Optimizes recovery flow after failed login attempts (Encrypted user ID, contact point, time stamp)"},ick:{category:"advertising",duration:"2 years",description:"Stores an encryption key used to encrypt cookies"},csm:{category:"advertising",duration:"90 days",description:"Insecure indicator"},s:{category:"advertising",duration:"90 days",description:"Facebook browser identification, authentication, marketing cookies"},sb:{category:"advertising",duration:"2 years",description:"Facebook browser identification, authentication, marketing cookies"},_fbc:{category:"advertising",duration:"2 years",description:"Used for Facebook advertising products like real time bidding"},oo:{category:"advertising",duration:"5 years",description:"Ad opt-out cookie"},ddid:{category:"advertising",duration:"28 days",description:"Used to open specific location in advertiser app upon installation"},locale:{category:"advertising",duration:"7 days",description:"Contains display locale of last logged in user"},js_ver:{category:"advertising",duration:"7 days",description:"Records age of Facebook javascript files"},rc:{category:"advertising",duration:"7 days",description:"Used to optimize site performance for advertisers"},campaign_click_url:{category:"advertising",duration:"30 days",description:"Records Facebook URL landed on after clicking an ad"},usida:{category:"advertising",duration:"Session",description:"Collects browser and unique identifier for targeted advertising"},wd:{category:"functional",duration:"Session",description:"Stores browser window dimensions for page rendering optimization"},presence:{category:"functional",duration:"Session",description:"Contains user chat state"}},translations={en:{title:"We value your privacy",description:'We use cookies to improve your browsing experience, provide personalized ads or content, and analyze our traffic. By clicking "Accept All," you consent to the use of cookies.',privacy:"Privacy Policy",customize:"Adjust",reject:"Reject all",accept:"Accept all",essential:"Essential Cookies",essentialDesc:"Necessary for website functionality",analytics:"Analytics Cookies",analyticsDesc:"Help understand visitor interactions",performance:"Performance Cookies",performanceDesc:"Improve website performance",advertising:"Advertising Cookies",advertisingDesc:"Deliver relevant ads",other:"Other Cookies",otherDesc:"Uncategorized cookies",save:"Save Preferences",language:"English",statsTitle:"Consent Statistics",statsAccepted:"Accepted",statsRejected:"Rejected",statsCustom:"Customized",statsTotal:"Total",statsPercentage:"Percentage",statsLast1Day:"Last 1 Day",statsLast7Days:"Last 7 Days",statsLast30Days:"Last 30 Days",passwordPrompt:"Enter password to view analytics",passwordSubmit:"Submit",passwordIncorrect:"Incorrect password",dashboardTitle:"Consent Analytics Dashboard",seeAnalytics:"See Consent Analytics"}},countryLanguageMap={AT:"de",BE:"nl",BE:"fr",BG:"bg",HR:"hr",CY:"el",CZ:"cs",DK:"da",EE:"et",FI:"fi",FR:"fr",DE:"de",GR:"el",HU:"hu",IE:"en",IT:"it",LV:"lv",LT:"lt",LU:"fr",LU:"de",MT:"mt",NL:"nl",PL:"pl",PT:"pt",RO:"ro",SK:"sk",SI:"sl",ES:"es",SE:"sv",AL:"en",BA:"en",IS:"en",LI:"de",MK:"en",NO:"en",RS:"en",CH:"de",CH:"fr",CH:"it",UA:"uk",GB:"en",US:"en",CA:"en",CA:"fr",AU:"en",NZ:"en",ZA:"en",IN:"en",CN:"zh",JP:"ja",KR:"ko",BR:"pt",MX:"es",AR:"es",RU:"ru"};let consentAnalytics={total:{accepted:0,rejected:0,custom:0},daily:{}},isDashboardAuthenticated=!1,bannerTimer=null,bannerShown=!1,locationData={};const savedLocation=sessionStorage.getItem("locationData");async function fetchLocationData(){if(locationData.country&&"Unknown"!==locationData.country)return locationData;try{const e=await fetch("https://ipinfo.io/json?token=4c1e5d00e0ac93");if(!e.ok)throw new Error("Failed to fetch location");const t=await e.json();return locationData={continent:getContinentFromCountry(t.country)||"Unknown",country:t.country||"Unknown",city:t.city||"Unknown",zip:t.postal||"Unknown",ip:t.ip||"Unknown",street:t.loc||"Unknown",region:t.region||"Unknown",timezone:t.timezone||"Unknown",isp:t.org||"Unknown",language:(navigator.language||"Unknown").split("-")[0]},sessionStorage.setItem("locationData",JSON.stringify(locationData)),window.dataLayer.push({event:"locationRetrieved",location_data:locationData,timestamp:(new Date).toISOString()}),locationData}catch(e){return console.error("Error fetching location:",e),locationData={continent:"Unknown",country:"Unknown",city:"Unknown",zip:"Unknown",ip:"Unknown",street:"Unknown",region:"Unknown",timezone:"Unknown",isp:"Unknown",language:(navigator.language||"Unknown").split("-")[0]},locationData}}function getContinentFromCountry(e){return{AF:"Africa",AL:"Europe",DZ:"Africa",AS:"Oceania",AD:"Europe",AO:"Africa",AR:"South America",AM:"Asia",AU:"Oceania",AT:"Europe",AZ:"Asia",BS:"North America",BH:"Asia",BD:"Asia",BB:"North America",BY:"Europe",BE:"Europe",BZ:"North America",BJ:"Africa",BT:"Asia",BO:"South America",BA:"Europe",BW:"Africa",BR:"South America",BN:"Asia",BG:"Europe",BF:"Africa",BI:"Africa",BJ:"Africa",BD:"Asia",NL:"Europe",US:"North America",CA:"North America",GB:"Europe",CN:"Asia",IN:"Asia",ZA:"Africa",AU:"Oceania",NZ:"Oceania",DE:"Europe",FR:"Europe",IT:"Europe",ES:"Europe",PL:"Europe",SE:"Europe",NO:"Europe",DK:"Europe",RU:"Europe",BR:"South America",MX:"North America",JP:"Asia",KR:"Asia",AE:"Asia",SG:"Asia",TH:"Asia",ID:"Asia",PH:"Asia",MY:"Asia",KH:"Asia",VN:"Asia",PK:"Asia",EG:"Africa",KE:"Africa",NG:"Africa",ET:"Africa",TZ:"Africa",UG:"Africa",GH:"Africa",MA:"Africa",MO:"Asia",LK:"Asia",BD:"Asia",IQ:"Asia",CO:"South America",CL:"South America",PE:"South America",VE:"South America",BO:"South America",PY:"South America",SR:"South America",EC:"South America",GT:"North America",HT:"North America",DO:"North America",CR:"North America",CU:"North America",JM:"North America",BS:"North America",NI:"North America",BZ:"North America",PA:"North America",SV:"North America",GT:"North America",RU:"Europe",BG:"Europe",RO:"Europe",UA:"Europe",CZ:"Europe",HU:"Europe",SK:"Europe",HR:"Europe",SI:"Europe",MK:"Europe",RS:"Europe",ME:"Europe",AL:"Europe",AM:"Asia",AZ:"Asia",GE:"Asia",MN:"Asia",NP:"Asia",BT:"Asia",KG:"Asia",TJ:"Asia",UZ:"Asia",KZ:"Asia",TM:"Asia"}[e]||"Unknown"}function loadAnalyticsData(){const e=localStorage.getItem("consentAnalytics");e&&(consentAnalytics=JSON.parse(e));const t=(new Date).toISOString().split("T")[0];consentAnalytics.daily[t]||(consentAnalytics.daily[t]={accepted:0,rejected:0,custom:0}),isDashboardAuthenticated=!config.analytics.passwordProtect||"true"===getCookie("dashboard_auth")}function saveAnalyticsData(){localStorage.setItem("consentAnalytics",JSON.stringify(consentAnalytics))}function updateConsentStats(e){const t=(new Date).toISOString().split("T")[0];"accepted"===e?(consentAnalytics.total.accepted++,consentAnalytics.daily[t].accepted++):"rejected"===e?(consentAnalytics.total.rejected++,consentAnalytics.daily[t].rejected++):"custom"===e&&(consentAnalytics.total.custom++,consentAnalytics.daily[t].custom++),saveAnalyticsData()}function generateAnalyticsDashboard(e="en"){const t=translations[e]||translations.en,n=consentAnalytics.total.accepted+consentAnalytics.total.rejected+consentAnalytics.total.custom,o=n>0?Math.round(consentAnalytics.total.accepted/n*100):0,a=n>0?Math.round(consentAnalytics.total.rejected/n*100):0,i=n>0?Math.round(consentAnalytics.total.custom/n*100):0,s=(new Date).toISOString().split("T")[0],c={};c[s]=consentAnalytics.daily[s]||{accepted:0,rejected:0,custom:0};const r={};Object.keys(consentAnalytics.daily).sort().reverse().slice(0,7).forEach((e=>{r[e]=consentAnalytics.daily[e]}));const d={};return Object.keys(consentAnalytics.daily).sort().reverse().slice(0,30).forEach((e=>{d[e]=consentAnalytics.daily[e]})),`\n    <div class="analytics-dashboard">\n        <h3>${t.dashboardTitle}</h3>\n        \n        <div class="stats-summary">\n            <div class="stat-card accepted">\n                <h4>${t.statsAccepted}</h4>\n                <div class="stat-value">${consentAnalytics.total.accepted}</div>\n                <div class="stat-percentage">${o}%</div>\n            </div>\n            \n            <div class="stat-card rejected">\n                <h4>${t.statsRejected}</h4>\n                <div class="stat-value">${consentAnalytics.total.rejected}</div>\n                <div class="stat-percentage">${a}%</div>\n            </div>\n            \n            <div class="stat-card custom">\n                <h4>${t.statsCustom}</h4>\n                <div class="stat-value">${consentAnalytics.total.custom}</div>\n                <div class="stat-percentage">${i}%</div>\n            </div>\n            \n            <div class="stat-card total">\n                <h4>${t.statsTotal}</h4>\n                <div class="stat-value">${n}</div>\n                <div class="stat-percentage">100%</div>\n            </div>\n        </div>\n        \n        <div class="time-based-stats">\n            <div class="time-stat">\n                <h4>${t.statsLast1Day}</h4>\n                <div class="stat-bars">\n                    ${Object.entries(c).map((([e,n])=>{const o=n.accepted+n.rejected+n.custom,a=o>0?n.accepted/o*100:0,i=o>0?n.rejected/o*100:0;return`\n                        <div class="stat-bar-container">\n                            <div class="stat-bar-label">${e}</div>\n                            <div class="stat-bar">\n                                <div class="stat-bar-segment accepted" style="width: ${a}%"></div>\n                                <div class="stat-bar-segment custom" style="width: ${o>0?n.custom/o*100:0}%"></div>\n                                <div class="stat-bar-segment rejected" style="width: ${i}%"></div>\n                            </div>\n                            <div class="stat-bar-legend">\n                                <span>${n.accepted} ${t.statsAccepted}</span>\n                                <span>${n.custom} ${t.statsCustom}</span>\n                                <span>${n.rejected} ${t.statsRejected}</span>\n                            </div>\n                        </div>`})).join("")}\n                </div>\n            </div>\n            \n            <div class="time-stat">\n                <h4>${t.statsLast7Days}</h4>\n                <div class="stat-bars">\n                    ${Object.entries(r).map((([e,n])=>{const o=n.accepted+n.rejected+n.custom,a=o>0?n.accepted/o*100:0,i=o>0?n.rejected/o*100:0;return`\n                        <div class="stat-bar-container">\n                            <div class="stat-bar-label">${e}</div>\n                            <div class="stat-bar">\n                                <div class="stat-bar-segment accepted" style="width: ${a}%"></div>\n                                <div class="stat-bar-segment custom" style="width: ${o>0?n.custom/o*100:0}%"></div>\n                                <div class="stat-bar-segment rejected" style="width: ${i}%"></div>\n                            </div>\n                            <div class="stat-bar-legend">\n                                <span>${n.accepted} ${t.statsAccepted}</span>\n                                <span>${n.custom} ${t.statsCustom}</span>\n                                <span>${n.rejected} ${t.statsRejected}</span>\n                            </div>\n                        </div>`})).join("")}\n                </div>\n            </div>\n            \n            <div class="time-stat">\n                <h4>${t.statsLast30Days}</h4>\n                <div class="stat-bars">\n                    ${Object.entries(d).map((([e,n])=>{const o=n.accepted+n.rejected+n.custom,a=o>0?n.accepted/o*100:0,i=o>0?n.rejected/o*100:0;return`\n                        <div class="stat-bar-container">\n                            <div class="stat-bar-label">${e}</div>\n                            <div class="stat-bar">\n                                <div class="stat-bar-segment accepted" style="width: ${a}%"></div>\n                                <div class="stat-bar-segment custom" style="width: ${o>0?n.custom/o*100:0}%"></div>\n                                <div class="stat-bar-segment rejected" style="width: ${i}%"></div>\n                            </div>\n                            <div class="stat-bar-legend">\n                                <span>${n.accepted} ${t.statsAccepted}</span>\n                                <span>${n.custom} ${t.statsCustom}</span>\n                                <span>${n.rejected} ${t.statsRejected}</span>\n                            </div>\n                        </div>`})).join("")}\n                </div>\n            </div>\n        </div>\n    </div>`}function generatePasswordPrompt(e="en"){const t=translations[e]||translations.en;return`\n    <div class="password-prompt">\n        <h3>${t.passwordPrompt}</h3>\n        <input type="password" id="dashboardPasswordInput" placeholder="Password">\n        <button id="dashboardPasswordSubmit">${t.passwordSubmit}</button>\n        <p id="passwordError" class="error-message"></p>\n    </div>`}function isDomainAllowed(){if(0===config.allowedDomains.length)return!0;const e=window.location.hostname;return config.allowedDomains.some((t=>t.startsWith(".")?e===t.substring(1)||e.endsWith(t):e===t))}function checkGeoTargeting(e){return e&&e.country&&"Unknown"!==e.country?!(config.geoConfig.blockedCountries.length>0&&config.geoConfig.blockedCountries.includes(e.country))&&(!(config.geoConfig.blockedRegions.length>0&&config.geoConfig.blockedRegions.includes(e.region))&&(!(config.geoConfig.blockedCities.length>0&&config.geoConfig.blockedCities.includes(e.city))&&(config.geoConfig.euOnly?EU_COUNTRIES.includes(e.country):config.geoConfig.specificRegions.length>0?config.geoConfig.specificRegions.includes(e.region):!(config.geoConfig.allowedCountries.length>0&&!config.geoConfig.allowedCountries.includes(e.country))&&(!(config.geoConfig.allowedRegions.length>0&&!config.geoConfig.allowedRegions.includes(e.region))&&!(config.geoConfig.allowedCities.length>0&&!config.geoConfig.allowedCities.includes(e.city)))))):!config.geoConfig.euOnly}function detectUserLanguage(e){if(config.behavior.rememberLanguage){const e=getCookie("preferred_language");if(e&&translations[e])return e}if(config.languageConfig.autoDetectLanguage&&e&&e.country){const t=countryLanguageMap[e.country];if(t&&translations[t])return t}const t=(navigator.language||"en").split("-")[0];return translations[t]?t:config.languageConfig.defaultLanguage||"en"}function getAvailableLanguages(){return config.languageConfig.availableLanguages.length>0?config.languageConfig.availableLanguages.filter((e=>translations[e])):Object.keys(translations)}function changeLanguage(e){const t=translations[e]||translations.en,n=document.getElementById("cookieConsentBanner");n&&(n.querySelector("h2").textContent=t.title,n.querySelector("p").textContent=t.description,n.querySelector(".main-privacy-policy-link").textContent=t.privacy,n.querySelector("#acceptAllBtn").textContent=t.accept,n.querySelector("#adjustConsentBtn").textContent=t.customize,n.querySelector("#rejectAllBtn").textContent=t.reject);const o=document.getElementById("cookieSettingsModal");if(o){o.querySelector("h2").textContent=t.title;const e={functional:"essential",analytics:"analytics",performance:"performance",advertising:"advertising",uncategorized:"other"};for(const[n,o]of Object.entries(e)){const e=document.querySelector(`input[data-category="${n}"]`);if(e){const n=e.closest(".cookie-category");n.querySelector("h3").textContent=t[o],n.querySelector("p").textContent=t[`${o}Desc`]}}o.querySelector("#rejectAllSettingsBtn").textContent=t.reject,o.querySelector("#saveSettingsBtn").textContent=t.save,o.querySelector("#acceptAllSettingsBtn").textContent=t.accept;const n=o.querySelector(".see-analytics-link");n&&(n.textContent=t.seeAnalytics)}const a=document.getElementById("cookieFloatingButton");a&&(a.title=t.title);const i=document.getElementById("cookieAnalyticsModal");i&&"flex"===i.style.display&&(config.analytics.passwordProtect&&!isDashboardAuthenticated?(i.querySelector(".cookie-analytics-body").innerHTML=generatePasswordPrompt(e),setupPasswordPromptEvents()):i.querySelector(".cookie-analytics-body").innerHTML=generateAnalyticsDashboard(e));const s=document.querySelector(".cookie-analytics-header h2");s&&(s.textContent=t.dashboardTitle);const c=document.querySelector(".password-prompt h3"),r=document.getElementById("dashboardPasswordSubmit"),d=document.getElementById("passwordError");c&&(c.textContent=t.passwordPrompt),r&&(r.textContent=t.passwordSubmit),d&&d.textContent&&(d.textContent=translations[e].passwordIncorrect),config.behavior.rememberLanguage&&setCookie("preferred_language",e,365)}function scanAndCategorizeCookies(){const e=document.cookie.split(";"),t={functional:[],analytics:[],performance:[],advertising:[],uncategorized:[]};return e.forEach((e=>{const[n]=e.trim().split("="),o=n.trim();if(!o)return;let a=!1;for(const e in cookieDatabase)if(o.startsWith(e)||o===e){const i=cookieDatabase[e];t[i.category].push({name:o,value:n.substring(o.length+1)||"",duration:i.duration||getCookieDuration(o),description:i.description||"Unknown purpose"}),a=!0;break}a||"cookie_consent"===o||t.uncategorized.push({name:o,value:n.substring(o.length+1)||"",duration:getCookieDuration(o),description:"Unknown cookie purpose"})})),t}function getCookieDuration(e){if(!document.cookie.match(new RegExp(`${e}=[^;]+(;|$)`)))return"Session";const t=document.cookie.match(new RegExp(`${e}=[^;]+; expires=([^;]+)`));if(t&&t[1]){const e=new Date(t[1]);return e>new Date?`Expires ${e.toLocaleDateString()}`:"Expired"}return"Session"}function generateCookieTable(e){return`\n    <table class="main-cookie-details-table">\n        <thead>\n            <tr>\n                <th>Cookie Name</th>\n                <th>Value</th>\n                <th>Duration</th>\n                <th>Description</th>\n            </tr>\n        </thead>\n        <tbody>\n            ${e.map((e=>`\n            <tr>\n                <td><code>${e.name}</code></td>\n                <td class="cookie-value-cell">\n                    <span class="cookie-value-full" style="display:none;">${e.value}</span>\n                    <span class="cookie-value-truncated">${e.value.substring(0,20)}${e.value.length>20?"...":""}</span>\n                    ${e.value.length>20?'<button class="toggle-cookie-value" data-state="truncated">Show full</button>':""}\n                </td>\n                <td>${e.duration}</td>\n                <td>${e.description}</td>\n            </tr>`)).join("")}\n        </tbody>\n    </table>`}function injectConsentHTML(e,t="en"){const n=translations[t]||translations.en,o=getAvailableLanguages(),a=t=>{const o=e[t],a="functional"===t?"essential":t,i="functional"===t;return`\n        <div class="cookie-category">\n            <div class="toggle-container">\n                <h3>${n[a]}</h3>\n                <label class="main-toggle-switch" data-ms-consent="ad_storage">\n                    <input type="checkbox" data-category="${t}" ${i?"checked disabled":""}>\n                    <span class="toggle-slider"></span>\n                </label>\n            </div>\n            <p>${n[`${a}Desc`]}</p>\n            <div class="cookie-details-container">\n                <div class="cookie-details-header">\n                    <span>Cookie Details</span>\n                    <span class="toggle-details">+</span>\n                </div>\n                <div class="main-cookie-details-content" style="display: none;">\n                    ${o.length>0?generateCookieTable(o):'<p class="no-cookies-message">No cookies in this category detected.</p>'}\n                </div>\n            </div>\n        </div>`},i=config.languageConfig.showLanguageSelector?`\n    <div class="language-selector">\n        <select id="cookieLanguageSelect">\n            ${o.map((e=>`\n                <option value="${e}" ${e===t?"selected":""}>${translations[e].language}</option>\n            `)).join("")}\n        </select>\n    </div>`:"",s=config.analytics.enabled&&config.analytics.showDashboard&&config.behavior.showAdminButton?`\n    <div id="cookieAdminButton" class="cookie-admin-button" title="${n.dashboardTitle}">\n        <svg viewBox="0 0 24 24" width="28" height="28" xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="none">\n            <title>Admin Dashboard</title>\n            <path d="M4.75,20.75A.25.25,0,0,0,5,20.5v-2a1,1,0,0,0-1-1H2a1,1,0,0,0-1,1v2a.25.25,0,0,0,.25.25Z"/>\n            <path d="M10.75,20.75A.25.25,0,0,0,11,20.5v-7a1,1,0,0,0-1-1H8a1,1,0,0,0-1,1v7a.25.25,0,0,0,.25.25Z"/>\n            <path d="M16.75,20.75A.25.25,0,0,0,17,20.5v-5a1,1,0,0,0-1-1H14a1,1,0,0,0-1,1v5a.25.25,0,0,0,.25.25Z"/>\n            <path d="M22.75,20.75A.25.25,0,0,0,23,20.5V8.5a1,1,0,0,0-1-1H20a1,1,0,0,0-1,1v12a.25.25,0,0,0,.25.25Z"/>\n            <path d="M3.5,13.5a2,2,0,0,0,2-2,1.981,1.981,0,0,0-.1-.6l3.167-2.64A1.955,1.955,0,0,0,11.011,7.8l2.5.834A2,2,0,0,0,17.5,8.5a1.964,1.964,0,0,0-.231-.912l3.287-3.835A1.994,1.994,0,1,0,19.5,2a1.962,1.962,0,0,0,.093.571L16.13,6.612a1.932,1.932,0,0,0-2.141.593l-2.5-.833A1.995,1.995,0,0,0,7.6,7.1L4.436,9.744A1.975,1.975,0,0,0,3.5,9.5a2,2,0,0,0,0,4Z"/>\n            <path d="M23,22H1a1.016,1.016,0,0,0-1,1,1,1,0,0,0,1,1H23a1,1,0,0,0,1-1A1.015,1.015,0,0,0,23,22Z"/>\n        </svg>\n    </div>`:"",c=`\n    \x3c!-- Main Consent Banner --\x3e\n    <div id="cookieConsentBanner" class="cookie-consent-banner">\n        <div class="cookie-consent-container">\n            ${i}\n            <div class="main-cookie-consent-content">\n                <h2>${n.title}</h2>\n                <p>${n.description}</p>\n                <a href="${config.privacyPolicyUrl}" class="main-privacy-policy-link">${n.privacy}</a>\n            </div>\n            <div class="all-cookie-consent-buttons">\n    <button id="adjustConsentBtn" class="cookie-btn top-adjust-button">${n.customize}</button>\n    <button id="rejectAllBtn" class="cookie-btn top-reject-btn">${n.reject}</button>\n    <button id="acceptAllBtn" class="cookie-btn main-accept-button">${n.accept}</button>\n</div>\n        </div>\n    </div>\n\n    \x3c!-- Settings Modal --\x3e\n    <div id="cookieSettingsModal" class="cookie-settings-modal">\n        <div class="cookie-settings-content">\n            <div class="cookie-settings-header">\n                <h2>${n.title}</h2>\n                <span class="close-modal">&times;</span>\n            </div>\n            <div class="cookie-settings-body">\n                ${a("functional")}\n                ${a("analytics")}\n                ${a("performance")}\n                ${a("advertising")}\n                ${e.uncategorized.length>0?a("uncategorized"):""}\n            </div>\n            <div class="cookie-settings-footer">\n                ${config.analytics.enabled?`\n                <div class="see-analytics-container">\n                    <a href="#" class="see-analytics-link">${n.seeAnalytics}</a>\n                </div>`:""}\n                 <div class="modal-buttons-container">\n                    <button id="acceptAllSettingsBtn" class="cookie-btn main-accept-button">${n.accept}</button>\n                    <button id="saveSettingsBtn" class="cookie-btn main-save-btn">${n.save}</button>\n                    <button id="rejectAllSettingsBtn" class="cookie-btn top-adjust-button">${n.reject}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Floating Settings Button --\x3e\n    <div id="cookieFloatingButton" class="cookie-settings-button" title="${n.title}">\n        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="none">\n            <path d="M6 8H8.01V10H6V8Z" fill="currentColor"/>\n            <path d="M11 11H13.01V13H11V11Z" fill="currentColor"/>\n            <path d="M8 15H10.01V17H8V15Z" fill="currentColor"/>\n            <path d="M15 15H17.01V17H15V15Z" fill="currentColor"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 12C1 5.92487 5.92487 1 12 1C12.0366 1 12.0732 1.00018 12.1097 1.00054L13.3208 1.01239L13.08 2.19932C13.0276 2.45721 13 2.72486 13 3C13 4.95769 14.4074 6.58878 16.2659 6.93296L16.9419 7.05815L17.067 7.73414C17.4112 9.59261 19.0423 11 21 11C21.2751 11 21.5428 10.9724 21.8007 10.92L22.9876 10.6792L22.9995 11.8903C22.9998 11.9268 23 11.9634 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM11.0002 3.0549C6.50018 3.55223 3 7.36736 3 12C3 16.9706 7.02944 21 12 21C16.6326 21 20.4478 17.4998 20.9451 12.9998C18.2609 12.9757 15.9991 11.1899 15.2573 8.74272C12.8101 8.00085 11.0243 5.73912 11.0002 3.0549Z" fill="currentColor"/>\n        </svg>\n    </div>\n    \n    ${s}\n    \n    \x3c!-- Analytics Dashboard --\x3e\n    <div id="cookieAnalyticsModal" class="cookie-analytics-modal">\n        <div class="cookie-analytics-content">\n            <div class="cookie-analytics-header">\n                <h2>${n.dashboardTitle}</h2>\n                <span class="close-analytics-modal">&times;</span>\n            </div>\n            <div class="cookie-analytics-body">\n                ${config.analytics.passwordProtect&&!isDashboardAuthenticated?generatePasswordPrompt(t):generateAnalyticsDashboard(t)}\n            </div>\n        </div>\n    </div>`;document.body.insertAdjacentHTML("beforeend",c)}function shouldShowBanner(){if(!config.behavior.bannerSchedule.enabled)return!0;const e=new Date,t=e.toISOString().split("T")[0],n=100*e.getHours()+e.getMinutes(),o=e.getDay();if(config.behavior.bannerSchedule.durationDays){const n=getCookie("first_visit_date");if(!n)return setCookie("first_visit_date",t,config.behavior.bannerSchedule.durationDays),!0;const o=new Date(n),a=new Date(o);return a.setDate(a.getDate()+config.behavior.bannerSchedule.durationDays),e<=a}if(config.behavior.bannerSchedule.durationMinutes){const t=getCookie("session_start_time");if(!t)return setCookie("session_start_time",e.getTime().toString(),.5),!0;const n=parseInt(t)+60*config.behavior.bannerSchedule.durationMinutes*1e3;return e.getTime()<=n}const a=new Date(config.behavior.bannerSchedule.startDate),i=new Date(config.behavior.bannerSchedule.endDate);if(e<a||e>i)return!1;const s=100*parseInt(config.behavior.bannerSchedule.startTime.split(":")[0])+parseInt(config.behavior.bannerSchedule.startTime.split(":")[1]),c=100*parseInt(config.behavior.bannerSchedule.endTime.split(":")[0])+parseInt(config.behavior.bannerSchedule.endTime.split(":")[1]);return!(n<s||n>c)&&!(config.behavior.bannerSchedule.daysOfWeek.length>0&&!config.behavior.bannerSchedule.daysOfWeek.includes(o))}function initializeCookieConsent(e,t){const n=getCookie("cookie_consent"),o=checkGeoTargeting(locationData)&&shouldShowBanner();if(!n&&config.behavior.autoShow&&o)setTimeout((()=>{showCookieBanner()}),1e3*config.behavior.bannerDelay);else if(n){const e=JSON.parse(n);updateConsentMode(e),loadCookiesAccordingToConsent(e),config.behavior.showFloatingButton&&showFloatingButton()}changeLanguage(config.languageConfig.defaultLanguage);const a=document.getElementById("cookieLanguageSelect");if(a&&(a.value=config.languageConfig.defaultLanguage,a.addEventListener("change",(function(){changeLanguage(this.value)}))),setupEventListeners(),document.querySelectorAll(".cookie-details-header").forEach((e=>{e.addEventListener("click",(function(){const e=this.nextElementSibling,t=this.querySelector(".toggle-details");"none"===e.style.display?(e.style.display="block",t.textContent="−"):(e.style.display="none",t.textContent="+")}))})),document.addEventListener("click",(function(e){if(e.target.classList.contains("toggle-cookie-value")){const t=e.target.closest(".cookie-value-cell"),n=t.querySelector(".cookie-value-full"),o=t.querySelector(".cookie-value-truncated");"truncated"===e.target.dataset.state?(n.style.display="inline",o.style.display="none",e.target.textContent="Hide full",e.target.dataset.state="full"):(n.style.display="none",o.style.display="inline",e.target.textContent="Show full",e.target.dataset.state="truncated")}})),config.analytics.enabled&&config.analytics.showDashboard&&config.behavior.showAdminButton){const e=document.getElementById("cookieAdminButton");e&&(e.addEventListener("click",showAnalyticsDashboard),setTimeout((()=>{e.style.display="flex",e.classList.add("show")}),100))}config.analytics.passwordProtect&&!isDashboardAuthenticated&&setupPasswordPromptEvents();const i=document.querySelector(".see-analytics-link");i&&i.addEventListener("click",(function(e){e.preventDefault(),showAnalyticsDashboard()})),config.behavior.bannerSchedule.enabled&&config.behavior.bannerSchedule.durationMinutes&&(bannerTimer&&clearTimeout(bannerTimer),bannerTimer=setTimeout((()=>{getCookie("cookie_consent")||hideCookieBanner()}),60*config.behavior.bannerSchedule.durationMinutes*1e3))}function setupPasswordPromptEvents(){const e=document.getElementById("dashboardPasswordSubmit");e&&e.addEventListener("click",(function(){const e=document.getElementById("dashboardPasswordInput"),t=document.getElementById("passwordError"),n=document.getElementById("cookieLanguageSelect")?document.getElementById("cookieLanguageSelect").value:"en";e.value===config.analytics.dashboardPassword?(isDashboardAuthenticated=!0,setCookie("dashboard_auth","true",config.analytics.passwordCookieDuration),document.querySelector(".cookie-analytics-body").innerHTML=generateAnalyticsDashboard(n)):t.textContent=translations[n].passwordIncorrect}))}function setupEventListeners(){document.getElementById("acceptAllBtn").addEventListener("click",(function(){acceptAllCookies(),hideCookieBanner(),config.behavior.showFloatingButton&&showFloatingButton()})),document.getElementById("rejectAllBtn").addEventListener("click",(function(){rejectAllCookies(),hideCookieBanner(),config.behavior.showFloatingButton&&showFloatingButton()})),document.getElementById("adjustConsentBtn").addEventListener("click",(function(){showCookieSettings(),hideCookieBanner()})),document.getElementById("acceptAllSettingsBtn").addEventListener("click",(function(){acceptAllCookies(),hideCookieSettings(),config.behavior.showFloatingButton&&showFloatingButton()})),document.getElementById("rejectAllSettingsBtn").addEventListener("click",(function(){rejectAllCookies(),hideCookieSettings(),config.behavior.showFloatingButton&&showFloatingButton()})),document.getElementById("saveSettingsBtn").addEventListener("click",(function(){saveCustomSettings(),hideCookieSettings(),config.behavior.showFloatingButton&&showFloatingButton()})),document.querySelector(".close-modal").addEventListener("click",(function(){hideCookieSettings(),getCookie("cookie_consent")||showCookieBanner()})),document.querySelector(".close-analytics-modal").addEventListener("click",(function(){hideAnalyticsDashboard()})),document.getElementById("cookieFloatingButton").addEventListener("click",(function(){document.getElementById("cookieConsentBanner").classList.contains("show")?hideCookieBanner():showCookieBanner()}))}function showCookieBanner(){const e=document.getElementById("cookieConsentBanner");e.style.display="block",setTimeout((()=>{e.classList.add("show")}),10),bannerShown=!0}function hideCookieBanner(){const e=document.getElementById("cookieConsentBanner");e.classList.remove("show"),setTimeout((()=>{e.style.display="none"}),400),bannerShown=!1}function showCookieSettings(){const e=document.getElementById("cookieSettingsModal");e.style.display="flex",setTimeout((()=>{e.classList.add("show")}),10),hideCookieBanner()}function hideCookieSettings(){const e=document.getElementById("cookieSettingsModal");e.classList.remove("show"),setTimeout((()=>{e.style.display="none"}),300)}function showAnalyticsDashboard(){const e=document.getElementById("cookieLanguageSelect")?document.getElementById("cookieLanguageSelect").value:"en";if(config.analytics.passwordProtect&&!isDashboardAuthenticated){const e=document.getElementById("cookieAnalyticsModal");e.style.display="flex",setTimeout((()=>{e.classList.add("show")}),10)}else{const t=document.getElementById("cookieAnalyticsModal");document.querySelector(".cookie-analytics-body").innerHTML=generateAnalyticsDashboard(e),t.style.display="flex",setTimeout((()=>{t.classList.add("show")}),10)}}function hideAnalyticsDashboard(){const e=document.getElementById("cookieAnalyticsModal");e.classList.remove("show"),setTimeout((()=>{e.style.display="none"}),300)}function showFloatingButton(){const e=document.getElementById("cookieFloatingButton");e.style.display="flex",setTimeout((()=>{e.classList.add("show")}),100)}function hideFloatingButton(){const e=document.getElementById("cookieFloatingButton");e.classList.remove("show"),setTimeout((()=>{e.style.display="none"}),300)}function acceptAllCookies(){const e={status:"accepted",gcs:"G111",categories:{functional:!0,analytics:!0,performance:!0,advertising:!0,uncategorized:!0},timestamp:(new Date).getTime()};setCookie("cookie_consent",JSON.stringify(e),365),updateConsentMode(e),loadCookiesAccordingToConsent(e),config.analytics.enabled&&updateConsentStats("accepted"),window.dataLayer.push({event:"cookie_consent_accepted",consent_mode:{ad_storage:"granted",analytics_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",personalization_storage:"granted",functionality_storage:"granted",security_storage:"granted"},gcs:"G111",consent_status:"accepted",consent_categories:e.categories,timestamp:(new Date).toISOString(),location_data:locationData})}function rejectAllCookies(){const e={status:"rejected",gcs:"G100",categories:{functional:!1,analytics:!1,performance:!1,advertising:!1,uncategorized:!1},timestamp:(new Date).getTime()};setCookie("cookie_consent",JSON.stringify(e),365),updateConsentMode(e),clearNonEssentialCookies(),config.analytics.enabled&&updateConsentStats("rejected"),window.dataLayer.push({event:"cookie_consent_rejected",consent_mode:{ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",personalization_storage:"denied",functionality_storage:"denied",security_storage:"granted"},gcs:"G100",consent_status:"rejected",consent_categories:e.categories,timestamp:(new Date).toISOString(),location_data:locationData})}function saveCustomSettings(){const e=document.querySelector('input[data-category="analytics"]').checked,t=document.querySelector('input[data-category="advertising"]').checked;let n;e&&t?n="G111":e||t?e&&!t?n="G101":!e&&t&&(n="G110"):n="G100";const o={status:"custom",gcs:n,categories:{functional:!0,analytics:e,performance:document.querySelector('input[data-category="performance"]').checked,advertising:t,uncategorized:!!document.querySelector('input[data-category="uncategorized"]')&&document.querySelector('input[data-category="uncategorized"]').checked},timestamp:(new Date).getTime()};setCookie("cookie_consent",JSON.stringify(o),365),updateConsentMode(o),loadCookiesAccordingToConsent(o),o.categories.analytics||clearCategoryCookies("analytics"),o.categories.performance||clearCategoryCookies("performance"),o.categories.advertising||clearCategoryCookies("advertising"),o.categories.uncategorized||clearCategoryCookies("uncategorized"),config.analytics.enabled&&updateConsentStats("custom");const a={ad_storage:o.categories.advertising?"granted":"denied",analytics_storage:o.categories.analytics?"granted":"denied",ad_user_data:o.categories.advertising?"granted":"denied",ad_personalization:o.categories.advertising?"granted":"denied",personalization_storage:o.categories.performance?"granted":"denied",functionality_storage:o.categories.functional?"granted":"denied",security_storage:"granted"};e&&!t?window.dataLayer.push({event:"analytics_cookie_accepted",consent_mode:{analytics_storage:"granted",ad_storage:"denied"},gcs:"G101",consent_status:"custom",consent_categories:o.categories,timestamp:(new Date).toISOString(),location_data:locationData}):t&&!e?window.dataLayer.push({event:"marketing_cookie_accepted",consent_mode:{ad_storage:"granted",analytics_storage:"denied"},gcs:"G110",consent_status:"custom",consent_categories:o.categories,timestamp:(new Date).toISOString(),location_data:locationData}):window.dataLayer.push({event:"cookie_consent_custom",consent_mode:a,gcs:n,consent_status:"custom",consent_categories:o.categories,timestamp:(new Date).toISOString(),location_data:locationData})}function clearNonEssentialCookies(){document.cookie.split(";").forEach((e=>{const[t]=e.trim().split("="),n=t.trim();let o=!1;for(const e in cookieDatabase)if(n.startsWith(e)&&"functional"===cookieDatabase[e].category){o=!0;break}!o&&n&&"cookie_consent"!==n&&(document.cookie=`${n}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`)}))}function clearCategoryCookies(e){scanAndCategorizeCookies()[e].forEach((e=>{document.cookie=`${e.name}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`}))}function loadCookiesAccordingToConsent(e){e.categories.advertising&&loadAdvertisingCookies(),e.categories.performance&&loadPerformanceCookies()}function updateConsentMode(e){const t={ad_storage:e.categories.advertising?"granted":"denied",analytics_storage:e.categories.analytics?"granted":"denied",ad_user_data:e.categories.advertising?"granted":"denied",ad_personalization:e.categories.advertising?"granted":"denied",personalization_storage:e.categories.performance?"granted":"denied",functionality_storage:e.categories.functional?"granted":"denied",security_storage:"granted"};let n="G100";if("accepted"===e.status?n="G111":"custom"===e.status&&(n=e.categories.analytics&&!e.categories.advertising?"G101":e.categories.advertising&&!e.categories.analytics?"G110":e.categories.analytics&&e.categories.advertising?"G111":"G100"),gtag("consent","update",{...t}),config.uetConfig.enabled){const t=e.categories.advertising?"granted":"denied";window.uetq.push("consent","update",{ad_storage:t}),window.dataLayer.push({event:"uet_consent_update",uet_consent:{ad_storage:t,status:e.status,src:"update",asc:"granted"===t?"G":"D",timestamp:(new Date).toISOString()},location_data:locationData})}window.dataLayer.push({event:"cookie_consent_update",consent_mode:t,gcs:n,consent_status:e.status,consent_categories:e.categories,timestamp:(new Date).toISOString(),location_data:locationData})}function setCookie(e,t,n){let o="";if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),o="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/; SameSite=Lax; Secure"}function getCookie(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let o=n[e];for(;" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}function loadAdvertisingCookies(){console.log("Loading advertising cookies")}function loadPerformanceCookies(){console.log("Loading performance cookies")}savedLocation?locationData=JSON.parse(savedLocation):fetchLocationData().then((()=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"locationInitialized",location_data:locationData,timestamp:(new Date).toISOString()})})),document.addEventListener("DOMContentLoaded",(async function(){if(sessionStorage.getItem("locationData")||await fetchLocationData(),!isDomainAllowed())return void console.log("Cookie consent banner not shown - domain not allowed");config.analytics.enabled&&loadAnalyticsData(),setDefaultUetConsent(),await fetchLocationData();if(!checkGeoTargeting(locationData))return void console.log("Cookie consent banner not shown - geo-targeting restriction");const e=scanAndCategorizeCookies(),t=detectUserLanguage(locationData);if(injectConsentHTML(e,t),initializeCookieConsent(e,t),config.behavior.acceptOnScroll){let e;window.addEventListener("scroll",(function(){!getCookie("cookie_consent")&&bannerShown&&(clearTimeout(e),e=setTimeout((function(){(window.scrollY+window.innerHeight)/document.body.scrollHeight*100>30&&(acceptAllCookies(),hideCookieBanner(),config.behavior.showFloatingButton&&showFloatingButton())}),200))}))}config.behavior.acceptOnContinue&&document.addEventListener("click",(function(e){getCookie("cookie_consent")||!bannerShown||e.target.closest("#cookieConsentBanner")||e.target.closest("#cookieSettingsModal")||(acceptAllCookies(),hideCookieBanner(),config.behavior.showFloatingButton&&showFloatingButton())}))})),"undefined"!=typeof window&&(window.cookieConsent={showBanner:showCookieBanner,hideBanner:hideCookieBanner,showSettings:showCookieSettings,acceptAll:acceptAllCookies,rejectAll:rejectAllCookies,saveSettings:saveCustomSettings,changeLanguage:changeLanguage,showAnalytics:showAnalyticsDashboard,config:config});
